{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ absolute_url(asset('build/css/common/table.css')) }}">
    <link rel="stylesheet" href="{{ absolute_url(asset('build/css/admin/horseman.css')) }}">
{% endblock %}

{% block body %}
    {{ include('common/navAdmin.html.twig') }}

    <div id="genericModal" class="modal">
        <div id="modalContent"></div>
    </div>

    <div class="row container">
        <div class="col xl12 l12 m12 s12 center-align">
            <div class="card">
                <div class="card-content">
                    <h3>{{user.completeName}}</h3>
                </div>
            </div>
        </div>


        <div class="col xl5 l5 m12 s12">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Coordonnées</span>
                    <p>
                        {{user.completeName}}<br>

                        {% if user.address == null %}
                            <i>Adresse non définie</i><br>
                        {% else %}
                            {{ user.address }}<br>
                            {{ user.zipCode }} {{user.country }}<br>
                        {% endif %}

                        {% if user.username == null %}
                            {{ user.username }}
                        {% else %}
                            {{user.username}} / {{ user.phone }}
                        {% endif %}
                    </p>
                </div>
            </div>
            <div class="card">
                <div class="card-content">
                    <span class="card-title">
                        {% transchoice user.horse|length %}
                            [0,1] Cheval|]1,Inf[ Chevaux
                        {% endtranschoice %}
                    </span>

                    {{ include('dashboard/admin/sections/horse.html.twig') }}

                </div>
            </div>

        </div>

        <div class="col xl7 l7 m12 s12">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Carte de cours</span>

                    {{ include('dashboard/admin/sections/courseCard.html.twig') }}

                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">Ajouter un décompte<i class="material-icons right">close</i></span>

                    <div class="col xl12 l12 m12 s12" id="flashMessagesCourseCardHistory"></div>

                    {{ include('dashboard/admin/ajax/forms/updateCourseCard.html.twig') }}

                </div>
            </div>
        </div>
    </div>

    <div class="row container">

        <div class="col xl12 l12 m12 s12">
            <div class="card">
                <div class="card-content">
                    <span class="card-title">Factures</span>

                    <a class="modal-trigger  btn-floating btn-large waves-effect waves-light absolute-icon"
                       id="add-bill-modal-trigger" data-url="{{ path('add-bill-form',{'id': user.id })}}">
                        <i class="material-icons">add</i>
                    </a>

                    {{ include('dashboard/admin/tables/bills.html.twig') }}

                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    <script src="{{ absolute_url(asset('build/js/admin/horseman.js')) }}" type="text/javascript"></script>
{% endblock %}
